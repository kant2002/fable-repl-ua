import{class_type}from"./Reflection.js";import{fromNumber,op_Addition,toInt,toNumber,compare,fromInteger}from"./Long.js";function Native_random(){return Math.random()}function Native_randomNext(e,t){if(t<e)throw new Error("minValue must be less than maxValue");return Math.floor(Math.random()*(t-e))+e}function Native_randomBytes(e){if(null==e)throw new Error("Buffer cannot be null");for(let t=0;t<e.length;t+=6){let r=Math.floor(281474976710656*Math.random());const n=Math.floor(r/16777216);for(let o=0;o<6&&t+o<e.length;o++)3===o&&(r=n),e[t+o]=255&r,r>>>=8}}export class NonSeeded{constructor(){}Next0(){return Native_randomNext(0,2147483647)}Next1(e){return Native_randomNext(0,e)}Next2(e,t){return Native_randomNext(e,t)}NextDouble(){return Native_random()}NextBytes(e){Native_randomBytes(e)}}export function NonSeeded$reflection(){return class_type("Random.NonSeeded",void 0,NonSeeded)}export function NonSeeded_$ctor(){return new NonSeeded}export class Seeded{constructor(e){this.MBIG=2147483647,this.inext=0,this.inextp=0,this.seedArray=new Int32Array(56);let t=0,r=0,n=0;r=161803398-(0|(-2147483648===e?2147483647:Math.abs(e)))|0,this.seedArray[55]=0|r,n=1;for(let e=1;e<=54;e++)t=21*e%55|0,this.seedArray[t]=0|n,n=r-n|0,n<0&&(n=n+this.MBIG|0),r=0|this.seedArray[t];for(let e=1;e<=4;e++)for(let e=1;e<=55;e++)this.seedArray[e]=this.seedArray[e]-this.seedArray[1+(e+30)%55]|0,this.seedArray[e]<0&&(this.seedArray[e]=this.seedArray[e]+this.MBIG|0);this.inext=0,this.inextp=21}Next0(){return 0|Seeded__InternalSample(this)}Next1(e){if(e<0)throw new Error("maxValue must be positive");return 0|~~(Seeded__Sample(this)*e)}Next2(e,t){if(e>t)throw new Error("minValue must be less than maxValue");const r=fromInteger(t-e,!1,2);return 0|(compare(r,fromInteger(2147483647,!1,2))<=0?~~(Seeded__Sample(this)*toNumber(r))+e:~~toInt(op_Addition(fromNumber(Seeded__GetSampleForLargeRange(this)*toNumber(r),!1),fromInteger(e,!1,2))))}NextDouble(){return Seeded__Sample(this)}NextBytes(e){const t=this;if(null==e)throw new Error("buffer");for(let r=0;r<=e.length-1;r++)e[r]=Seeded__InternalSample(t)%256&255}}export function Seeded$reflection(){return class_type("Random.Seeded",void 0,Seeded)}export function Seeded_$ctor_Z524259A4(e){return new Seeded(e)}function Seeded__InternalSample(e){let t=0,r=e.inext,n=e.inextp;return r=r+1|0,r>=56&&(r=1),n=n+1|0,n>=56&&(n=1),t=e.seedArray[r]-e.seedArray[n]|0,t===e.MBIG&&(t=t-1|0),t<0&&(t=t+e.MBIG|0),e.seedArray[r]=0|t,e.inext=0|r,e.inextp=0|n,0|t}export function Seeded__Sample(e){return Seeded__InternalSample(e)*(1/e.MBIG)}export function Seeded__GetSampleForLargeRange(e){let t=Seeded__InternalSample(e);Seeded__InternalSample(e)%2==0&&(t=-t);let r=t;return r+=2147483646,r/=4294967292,r}export function nonSeeded(){return NonSeeded_$ctor()}export function seeded(e){return Seeded_$ctor_Z524259A4(e)}