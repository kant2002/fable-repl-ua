import{disposeSafe,defaultOf,comparePrimitives,max,toIterator,getEnumerator,structuralHash,equals,compare}from"./Util.js";import{class_type}from"./Reflection.js";import{toArray,empty,singleton,append,enumerateWhile,delay}from"./Seq.js";import{initialize,copyTo,fill}from"./Array.js";export class Comparer$1{constructor(){}Compare(e,t){return compare(e,t)}}export function Comparer$1$reflection(e){return class_type("System.Collections.Generic.Comparer`1",[e],Comparer$1)}export function Comparer$1_$ctor(){return new Comparer$1}export function Comparer$1_get_Default(){return{Compare:(e,t)=>compare(e,t)}}export class EqualityComparer$1{constructor(){}Equals(e,t){return equals(e,t)}GetHashCode(e){return structuralHash(e)}}export function EqualityComparer$1$reflection(e){return class_type("System.Collections.Generic.EqualityComparer`1",[e],EqualityComparer$1)}export function EqualityComparer$1_$ctor(){return new EqualityComparer$1}export function EqualityComparer$1_get_Default(){return{Equals:(e,t)=>equals(e,t),GetHashCode:e=>structuralHash(e)}}export class Stack$1{constructor(e,t){this.contents=e,this.count=0|t}GetEnumerator(){const e=this;return getEnumerator(delay((()=>{let t=e.count-1;return enumerateWhile((()=>t>=0),delay((()=>append(singleton(e.contents[t]),delay((()=>(t=t-1|0,empty())))))))})))}[Symbol.iterator](){return toIterator(this.GetEnumerator())}"System.Collections.IEnumerable.GetEnumerator"(){return getEnumerator(this)}}export function Stack$1$reflection(e){return class_type("System.Collections.Generic.Stack`1",[e],Stack$1)}function Stack$1_$ctor_Z3B4C077E(e,t){return new Stack$1(e,t)}export function Stack$1_$ctor_Z524259A4(e){return Stack$1_$ctor_Z3B4C077E(fill(new Array(e),0,e,null),0)}export function Stack$1_$ctor(){return Stack$1_$ctor_Z524259A4(4)}export function Stack$1_$ctor_BB573A(e){const t=Array.from(e);return Stack$1_$ctor_Z3B4C077E(t,t.length)}export function Stack$1__Ensure_Z524259A4(e,t){const n=0|e.contents.length;if(t>n){const r=e.contents;e.contents=fill(new Array(max(comparePrimitives,t,2*n)),0,max(comparePrimitives,t,2*n),null),copyTo(r,0,e.contents,0,e.count)}}export function Stack$1__get_Count(e){return e.count}export function Stack$1__Pop(e){return e.count=e.count-1|0,e.contents[e.count]}export function Stack$1__Peek(e){return e.contents[e.count-1]}export function Stack$1__Contains_2B595(e,t){let n=!1,r=0;for(;r<e.count&&!n;)equals(t,e.contents[r])?n=!0:r=r+1|0;return n}export function Stack$1__TryPeek_1F3DB691(e,t){return e.count>0&&(t.contents=Stack$1__Peek(e),!0)}export function Stack$1__TryPop_1F3DB691(e,t){return e.count>0&&(t.contents=Stack$1__Pop(e),!0)}export function Stack$1__Push_2B595(e,t){Stack$1__Ensure_Z524259A4(e,e.count+1),e.contents[e.count]=t,e.count=e.count+1|0}export function Stack$1__Clear(e){e.count=0,fill(e.contents,0,e.contents.length,defaultOf())}export function Stack$1__TrimExcess(e){e.count/e.contents.length>.9&&Stack$1__Ensure_Z524259A4(e,e.count)}export function Stack$1__ToArray(e){return initialize(e.count,(t=>e.contents[e.count-1-t]),null)}export class Queue$1{constructor(e,t){this.contents=e,this.count=0|t,this.head=0,this.tail=0|t}GetEnumerator(){return getEnumerator(Queue$1__toSeq(this))}[Symbol.iterator](){return toIterator(this.GetEnumerator())}"System.Collections.IEnumerable.GetEnumerator"(){return getEnumerator(this)}}export function Queue$1$reflection(e){return class_type("System.Collections.Generic.Queue`1",[e],Queue$1)}function Queue$1_$ctor_Z3B4C077E(e,t){return new Queue$1(e,t)}export function Queue$1_$ctor_Z524259A4(e){if(e<0)throw new Error("capacity is less than 0");return Queue$1_$ctor_Z3B4C077E(fill(new Array(e),0,e,null),0)}export function Queue$1_$ctor(){return Queue$1_$ctor_Z524259A4(4)}export function Queue$1_$ctor_BB573A(e){const t=Array.from(e);return Queue$1_$ctor_Z3B4C077E(t,t.length)}export function Queue$1__get_Count(e){return e.count}export function Queue$1__Enqueue_2B595(e,t){e.count===Queue$1__size(e)&&Queue$1__ensure_Z524259A4(e,e.count+1),e.contents[e.tail]=t,e.tail=(e.tail+1)%Queue$1__size(e)|0,e.count=e.count+1|0}export function Queue$1__Dequeue(e){if(0===e.count)throw new Error("Queue is empty");const t=e.contents[e.head];return e.head=(e.head+1)%Queue$1__size(e)|0,e.count=e.count-1|0,t}export function Queue$1__Peek(e){if(0===e.count)throw new Error("Queue is empty");return e.contents[e.head]}export function Queue$1__TryDequeue_1F3DB691(e,t){return 0!==e.count&&(t.contents=Queue$1__Dequeue(e),!0)}export function Queue$1__TryPeek_1F3DB691(e,t){return 0!==e.count&&(t.contents=Queue$1__Peek(e),!0)}export function Queue$1__Contains_2B595(e,t){let n=!1,r=0;for(;r<e.count&&!n;)equals(t,e.contents[Queue$1__toIndex_Z524259A4(e,r)])?n=!0:r=r+1|0;return n}export function Queue$1__Clear(e){e.count=0,e.head=0,e.tail=0,fill(e.contents,0,Queue$1__size(e),defaultOf())}export function Queue$1__TrimExcess(e){e.count/e.contents.length>.9&&Queue$1__ensure_Z524259A4(e,e.count)}export function Queue$1__ToArray(e){return toArray(Queue$1__toSeq(e))}export function Queue$1__CopyTo_Z3B4C077E(e,t,n){let r=n;const o=getEnumerator(Queue$1__toSeq(e));try{for(;o["System.Collections.IEnumerator.MoveNext"]();){const e=o["System.Collections.Generic.IEnumerator`1.get_Current"]();t[r]=e,r=r+1|0}}finally{disposeSafe(o)}}export function Queue$1__size(e){return e.contents.length}export function Queue$1__toIndex_Z524259A4(e,t){return(e.head+t)%Queue$1__size(e)}export function Queue$1__ensure_Z524259A4(e,t){const n=fill(new Array(t),0,t,null);e.head<e.tail?copyTo(e.contents,e.head,n,0,e.count):(copyTo(e.contents,e.head,n,0,Queue$1__size(e)-e.head),copyTo(e.contents,0,n,Queue$1__size(e)-e.head,e.tail)),e.head=0,e.tail=0|e.count,e.contents=n}export function Queue$1__toSeq(e){return delay((()=>{let t=0;return enumerateWhile((()=>t<e.count),delay((()=>append(singleton(e.contents[Queue$1__toIndex_Z524259A4(e,t)]),delay((()=>(t=t+1|0,empty())))))))}))}