import{record_type,bool_type,list_type,option_type,class_type}from"./Reflection.js";import{some,value as value_1}from"./Option.js";import{singleton,ofArrayWithTail,head,tail,isEmpty as isEmpty_1,FSharpList,fold as fold_1,empty as empty_1,cons}from"./List.js";import{map as map_2,fill}from"./Array.js";import{structuralHash,partialApply,compare,toIterator,equals,disposeSafe,getEnumerator,isArrayLike}from"./Util.js";import{Record}from"./Types.js";import{tryPick as tryPick_1,pick as pick_1,iterate as iterate_1,compareWith,map as map_1,unfold}from"./Seq.js";import{format,join}from"./String.js";export class MapTreeLeaf$2{constructor(e,r){this.k=e,this.v=r}}export function MapTreeLeaf$2$reflection(e,r){return class_type("Map.MapTreeLeaf`2",[e,r],MapTreeLeaf$2)}export function MapTreeLeaf$2_$ctor_5BDDA1(e,r){return new MapTreeLeaf$2(e,r)}export function MapTreeLeaf$2__get_Key(e){return e.k}export function MapTreeLeaf$2__get_Value(e){return e.v}export class MapTreeNode$2 extends MapTreeLeaf$2{constructor(e,r,t,o,a){super(e,r),this.left=t,this.right=o,this.h=0|a}}export function MapTreeNode$2$reflection(e,r){return class_type("Map.MapTreeNode`2",[e,r],MapTreeNode$2,MapTreeLeaf$2$reflection(e,r))}export function MapTreeNode$2_$ctor_Z39DE9543(e,r,t,o,a){return new MapTreeNode$2(e,r,t,o,a)}export function MapTreeNode$2__get_Left(e){return e.left}export function MapTreeNode$2__get_Right(e){return e.right}export function MapTreeNode$2__get_Height(e){return e.h}export function MapTreeModule_empty(){}export function MapTreeModule_sizeAux(e,r){e:for(;;){const t=e;if(null!=r){const o=r;if(o instanceof MapTreeNode$2){e=MapTreeModule_sizeAux(t+1,MapTreeNode$2__get_Left(o)),r=MapTreeNode$2__get_Right(o);continue e}return t+1|0}return 0|t}}export function MapTreeModule_size(e){return MapTreeModule_sizeAux(0,e)}export function MapTreeModule_mk(e,r,t,o){let a,_;a=null!=e?e instanceof MapTreeNode$2?MapTreeNode$2__get_Height(e):1:0,_=null!=o?o instanceof MapTreeNode$2?MapTreeNode$2__get_Height(o):1:0;const p=0|(a<_?_:a);return 0===p?MapTreeLeaf$2_$ctor_5BDDA1(r,t):MapTreeNode$2_$ctor_Z39DE9543(r,t,e,o,p+1)}export function MapTreeModule_rebalance(e,r,t,o){let a,_,p,n,M,u;if(M=null!=e?e instanceof MapTreeNode$2?MapTreeNode$2__get_Height(e):1:0,u=null!=o?o instanceof MapTreeNode$2?MapTreeNode$2__get_Height(o):1:0,u>M+2){const p=value_1(o);if(p instanceof MapTreeNode$2){if(a=MapTreeNode$2__get_Left(p),(null!=a?(_=a,_ instanceof MapTreeNode$2?MapTreeNode$2__get_Height(_):1):0)>M+1){const o=value_1(MapTreeNode$2__get_Left(p));if(o instanceof MapTreeNode$2)return MapTreeModule_mk(MapTreeModule_mk(e,r,t,MapTreeNode$2__get_Left(o)),MapTreeLeaf$2__get_Key(o),MapTreeLeaf$2__get_Value(o),MapTreeModule_mk(MapTreeNode$2__get_Right(o),MapTreeLeaf$2__get_Key(p),MapTreeLeaf$2__get_Value(p),MapTreeNode$2__get_Right(p)));throw new Error("internal error: Map.rebalance")}return MapTreeModule_mk(MapTreeModule_mk(e,r,t,MapTreeNode$2__get_Left(p)),MapTreeLeaf$2__get_Key(p),MapTreeLeaf$2__get_Value(p),MapTreeNode$2__get_Right(p))}throw new Error("internal error: Map.rebalance")}if(M>u+2){const a=value_1(e);if(a instanceof MapTreeNode$2){if(p=MapTreeNode$2__get_Right(a),(null!=p?(n=p,n instanceof MapTreeNode$2?MapTreeNode$2__get_Height(n):1):0)>u+1){const e=value_1(MapTreeNode$2__get_Right(a));if(e instanceof MapTreeNode$2)return MapTreeModule_mk(MapTreeModule_mk(MapTreeNode$2__get_Left(a),MapTreeLeaf$2__get_Key(a),MapTreeLeaf$2__get_Value(a),MapTreeNode$2__get_Left(e)),MapTreeLeaf$2__get_Key(e),MapTreeLeaf$2__get_Value(e),MapTreeModule_mk(MapTreeNode$2__get_Right(e),r,t,o));throw new Error("internal error: Map.rebalance")}return MapTreeModule_mk(MapTreeNode$2__get_Left(a),MapTreeLeaf$2__get_Key(a),MapTreeLeaf$2__get_Value(a),MapTreeModule_mk(MapTreeNode$2__get_Right(a),r,t,o))}throw new Error("internal error: Map.rebalance")}return MapTreeModule_mk(e,r,t,o)}export function MapTreeModule_add(e,r,t,o){if(null!=o){const a=o,_=0|e.Compare(r,MapTreeLeaf$2__get_Key(a));return a instanceof MapTreeNode$2?_<0?MapTreeModule_rebalance(MapTreeModule_add(e,r,t,MapTreeNode$2__get_Left(a)),MapTreeLeaf$2__get_Key(a),MapTreeLeaf$2__get_Value(a),MapTreeNode$2__get_Right(a)):0===_?MapTreeNode$2_$ctor_Z39DE9543(r,t,MapTreeNode$2__get_Left(a),MapTreeNode$2__get_Right(a),MapTreeNode$2__get_Height(a)):MapTreeModule_rebalance(MapTreeNode$2__get_Left(a),MapTreeLeaf$2__get_Key(a),MapTreeLeaf$2__get_Value(a),MapTreeModule_add(e,r,t,MapTreeNode$2__get_Right(a))):_<0?MapTreeNode$2_$ctor_Z39DE9543(r,t,MapTreeModule_empty(),o,2):0===_?MapTreeLeaf$2_$ctor_5BDDA1(r,t):MapTreeNode$2_$ctor_Z39DE9543(r,t,o,MapTreeModule_empty(),2)}return MapTreeLeaf$2_$ctor_5BDDA1(r,t)}export function MapTreeModule_tryFind(e,r,t){e:for(;;){const o=e,a=r;if(null!=t){const _=t,p=0|o.Compare(a,MapTreeLeaf$2__get_Key(_));if(0===p)return some(MapTreeLeaf$2__get_Value(_));if(_ instanceof MapTreeNode$2){e=o,r=a,t=p<0?MapTreeNode$2__get_Left(_):MapTreeNode$2__get_Right(_);continue e}return}return}}export function MapTreeModule_find(e,r,t){const o=MapTreeModule_tryFind(e,r,t);if(null==o)throw new Error;return value_1(o)}export function MapTreeModule_partition1(e,r,t,o,a,_){return r(t,o)?[MapTreeModule_add(e,t,o,a),_]:[a,MapTreeModule_add(e,t,o,_)]}export function MapTreeModule_partitionAux(e,r,t,o,a){e:for(;;){const _=e,p=r,n=[o,a];if(null!=t){const M=t;if(M instanceof MapTreeNode$2){const u=MapTreeModule_partitionAux(_,p,MapTreeNode$2__get_Right(M),n[0],n[1]),i=MapTreeModule_partition1(_,p,MapTreeLeaf$2__get_Key(M),MapTreeLeaf$2__get_Value(M),u[0],u[1]);e=_,r=p,t=MapTreeNode$2__get_Left(M),o=i[0],a=i[1];continue e}return MapTreeModule_partition1(_,p,MapTreeLeaf$2__get_Key(M),MapTreeLeaf$2__get_Value(M),n[0],n[1])}return n}}export function MapTreeModule_partition(e,r,t){return MapTreeModule_partitionAux(e,r,t,MapTreeModule_empty(),MapTreeModule_empty())}export function MapTreeModule_filter1(e,r,t,o,a){return r(t,o)?MapTreeModule_add(e,t,o,a):a}export function MapTreeModule_filterAux(e,r,t,o){e:for(;;){const a=e,_=r,p=o;if(null!=t){const n=t;if(n instanceof MapTreeNode$2){const M=MapTreeModule_filterAux(a,_,MapTreeNode$2__get_Left(n),p),u=MapTreeModule_filter1(a,_,MapTreeLeaf$2__get_Key(n),MapTreeLeaf$2__get_Value(n),M);e=a,r=_,t=MapTreeNode$2__get_Right(n),o=u;continue e}return MapTreeModule_filter1(a,_,MapTreeLeaf$2__get_Key(n),MapTreeLeaf$2__get_Value(n),p)}return p}}export function MapTreeModule_filter(e,r,t){return MapTreeModule_filterAux(e,r,t,MapTreeModule_empty())}export function MapTreeModule_spliceOutSuccessor(e){if(null!=e){const r=e;if(r instanceof MapTreeNode$2){if(null==MapTreeNode$2__get_Left(r))return[MapTreeLeaf$2__get_Key(r),MapTreeLeaf$2__get_Value(r),MapTreeNode$2__get_Right(r)];{const e=MapTreeModule_spliceOutSuccessor(MapTreeNode$2__get_Left(r));return[e[0],e[1],MapTreeModule_mk(e[2],MapTreeLeaf$2__get_Key(r),MapTreeLeaf$2__get_Value(r),MapTreeNode$2__get_Right(r))]}}return[MapTreeLeaf$2__get_Key(r),MapTreeLeaf$2__get_Value(r),MapTreeModule_empty()]}throw new Error("internal error: Map.spliceOutSuccessor")}export function MapTreeModule_remove(e,r,t){if(null!=t){const o=t,a=0|e.Compare(r,MapTreeLeaf$2__get_Key(o));if(o instanceof MapTreeNode$2){if(a<0)return MapTreeModule_rebalance(MapTreeModule_remove(e,r,MapTreeNode$2__get_Left(o)),MapTreeLeaf$2__get_Key(o),MapTreeLeaf$2__get_Value(o),MapTreeNode$2__get_Right(o));if(0===a){if(null==MapTreeNode$2__get_Left(o))return MapTreeNode$2__get_Right(o);if(null==MapTreeNode$2__get_Right(o))return MapTreeNode$2__get_Left(o);{const e=MapTreeModule_spliceOutSuccessor(MapTreeNode$2__get_Right(o));return MapTreeModule_mk(MapTreeNode$2__get_Left(o),e[0],e[1],e[2])}}return MapTreeModule_rebalance(MapTreeNode$2__get_Left(o),MapTreeLeaf$2__get_Key(o),MapTreeLeaf$2__get_Value(o),MapTreeModule_remove(e,r,MapTreeNode$2__get_Right(o)))}return 0===a?MapTreeModule_empty():t}return MapTreeModule_empty()}export function MapTreeModule_change(e,r,t,o){if(null!=o){const a=o;if(a instanceof MapTreeNode$2){const o=0|e.Compare(r,MapTreeLeaf$2__get_Key(a));if(o<0)return MapTreeModule_rebalance(MapTreeModule_change(e,r,t,MapTreeNode$2__get_Left(a)),MapTreeLeaf$2__get_Key(a),MapTreeLeaf$2__get_Value(a),MapTreeNode$2__get_Right(a));if(0===o){const e=t(some(MapTreeLeaf$2__get_Value(a)));if(null!=e)return MapTreeNode$2_$ctor_Z39DE9543(r,value_1(e),MapTreeNode$2__get_Left(a),MapTreeNode$2__get_Right(a),MapTreeNode$2__get_Height(a));if(null==MapTreeNode$2__get_Left(a))return MapTreeNode$2__get_Right(a);if(null==MapTreeNode$2__get_Right(a))return MapTreeNode$2__get_Left(a);{const e=MapTreeModule_spliceOutSuccessor(MapTreeNode$2__get_Right(a));return MapTreeModule_mk(MapTreeNode$2__get_Left(a),e[0],e[1],e[2])}}return MapTreeModule_rebalance(MapTreeNode$2__get_Left(a),MapTreeLeaf$2__get_Key(a),MapTreeLeaf$2__get_Value(a),MapTreeModule_change(e,r,t,MapTreeNode$2__get_Right(a)))}{const _=0|e.Compare(r,MapTreeLeaf$2__get_Key(a));if(_<0){const e=t(void 0);return null!=e?MapTreeNode$2_$ctor_Z39DE9543(r,value_1(e),MapTreeModule_empty(),o,2):o}if(0===_){const e=t(some(MapTreeLeaf$2__get_Value(a)));return null!=e?MapTreeLeaf$2_$ctor_5BDDA1(r,value_1(e)):MapTreeModule_empty()}{const e=t(void 0);return null!=e?MapTreeNode$2_$ctor_Z39DE9543(r,value_1(e),o,MapTreeModule_empty(),2):o}}}{const e=t(void 0);return null!=e?MapTreeLeaf$2_$ctor_5BDDA1(r,value_1(e)):o}}export function MapTreeModule_mem(e,r,t){e:for(;;){const o=e,a=r;if(null!=t){const _=t,p=0|o.Compare(a,MapTreeLeaf$2__get_Key(_));if(_ instanceof MapTreeNode$2){if(p<0){e=o,r=a,t=MapTreeNode$2__get_Left(_);continue e}if(0===p)return!0;e=o,r=a,t=MapTreeNode$2__get_Right(_);continue e}return 0===p}return!1}}export function MapTreeModule_iterOpt(e,r){e:for(;;){const t=e;if(null!=r){const o=r;if(o instanceof MapTreeNode$2){MapTreeModule_iterOpt(t,MapTreeNode$2__get_Left(o)),t(MapTreeLeaf$2__get_Key(o),MapTreeLeaf$2__get_Value(o)),e=t,r=MapTreeNode$2__get_Right(o);continue e}t(MapTreeLeaf$2__get_Key(o),MapTreeLeaf$2__get_Value(o))}break}}export function MapTreeModule_iter(e,r){MapTreeModule_iterOpt(e,r)}export function MapTreeModule_tryPickOpt(e,r){e:for(;;){const t=e;if(null!=r){const o=r;if(o instanceof MapTreeNode$2){const a=MapTreeModule_tryPickOpt(t,MapTreeNode$2__get_Left(o));if(null==a){const a=t(MapTreeLeaf$2__get_Key(o),MapTreeLeaf$2__get_Value(o));if(null==a){e=t,r=MapTreeNode$2__get_Right(o);continue e}return a}return a}return t(MapTreeLeaf$2__get_Key(o),MapTreeLeaf$2__get_Value(o))}return}}export function MapTreeModule_tryPick(e,r){return MapTreeModule_tryPickOpt(e,r)}export function MapTreeModule_existsOpt(e,r){e:for(;;){const t=e;if(null!=r){const o=r;if(o instanceof MapTreeNode$2){if(MapTreeModule_existsOpt(t,MapTreeNode$2__get_Left(o))||t(MapTreeLeaf$2__get_Key(o),MapTreeLeaf$2__get_Value(o)))return!0;e=t,r=MapTreeNode$2__get_Right(o);continue e}return t(MapTreeLeaf$2__get_Key(o),MapTreeLeaf$2__get_Value(o))}return!1}}export function MapTreeModule_exists(e,r){return MapTreeModule_existsOpt(e,r)}export function MapTreeModule_forallOpt(e,r){e:for(;;){const t=e;if(null!=r){const o=r;if(o instanceof MapTreeNode$2){if(MapTreeModule_forallOpt(t,MapTreeNode$2__get_Left(o))&&t(MapTreeLeaf$2__get_Key(o),MapTreeLeaf$2__get_Value(o))){e=t,r=MapTreeNode$2__get_Right(o);continue e}return!1}return t(MapTreeLeaf$2__get_Key(o),MapTreeLeaf$2__get_Value(o))}return!0}}export function MapTreeModule_forall(e,r){return MapTreeModule_forallOpt(e,r)}export function MapTreeModule_map(e,r){if(null!=r){const t=r;if(t instanceof MapTreeNode$2){const r=MapTreeModule_map(e,MapTreeNode$2__get_Left(t)),o=e(MapTreeLeaf$2__get_Value(t)),a=MapTreeModule_map(e,MapTreeNode$2__get_Right(t));return MapTreeNode$2_$ctor_Z39DE9543(MapTreeLeaf$2__get_Key(t),o,r,a,MapTreeNode$2__get_Height(t))}return MapTreeLeaf$2_$ctor_5BDDA1(MapTreeLeaf$2__get_Key(t),e(MapTreeLeaf$2__get_Value(t)))}return MapTreeModule_empty()}export function MapTreeModule_mapiOpt(e,r){if(null!=r){const t=r;if(t instanceof MapTreeNode$2){const r=MapTreeModule_mapiOpt(e,MapTreeNode$2__get_Left(t)),o=e(MapTreeLeaf$2__get_Key(t),MapTreeLeaf$2__get_Value(t)),a=MapTreeModule_mapiOpt(e,MapTreeNode$2__get_Right(t));return MapTreeNode$2_$ctor_Z39DE9543(MapTreeLeaf$2__get_Key(t),o,r,a,MapTreeNode$2__get_Height(t))}return MapTreeLeaf$2_$ctor_5BDDA1(MapTreeLeaf$2__get_Key(t),e(MapTreeLeaf$2__get_Key(t),MapTreeLeaf$2__get_Value(t)))}return MapTreeModule_empty()}export function MapTreeModule_mapi(e,r){return MapTreeModule_mapiOpt(e,r)}export function MapTreeModule_foldBackOpt(e,r,t){e:for(;;){const o=e,a=t;if(null!=r){const _=r;if(_ instanceof MapTreeNode$2){const p=MapTreeModule_foldBackOpt(o,MapTreeNode$2__get_Right(_),a),n=o(MapTreeLeaf$2__get_Key(_),MapTreeLeaf$2__get_Value(_),p);e=o,r=MapTreeNode$2__get_Left(_),t=n;continue e}return o(MapTreeLeaf$2__get_Key(_),MapTreeLeaf$2__get_Value(_),a)}return a}}export function MapTreeModule_foldBack(e,r,t){return MapTreeModule_foldBackOpt(e,r,t)}export function MapTreeModule_foldOpt(e,r,t){e:for(;;){const o=e,a=r;if(null!=t){const _=t;if(_ instanceof MapTreeNode$2){e=o,r=o(MapTreeModule_foldOpt(o,a,MapTreeNode$2__get_Left(_)),MapTreeLeaf$2__get_Key(_),MapTreeLeaf$2__get_Value(_)),t=MapTreeNode$2__get_Right(_);continue e}return o(a,MapTreeLeaf$2__get_Key(_),MapTreeLeaf$2__get_Value(_))}return a}}export function MapTreeModule_fold(e,r,t){return MapTreeModule_foldOpt(e,r,t)}export function MapTreeModule_foldSectionOpt(e,r,t,o,a,_){const p=(o,a,_)=>{e:for(;;){const n=o,M=_;if(null!=a){const u=a;if(u instanceof MapTreeNode$2){const i=0|e.Compare(r,MapTreeLeaf$2__get_Key(u)),l=0|e.Compare(MapTreeLeaf$2__get_Key(u),t),f=i<0?p(n,MapTreeNode$2__get_Left(u),M):M,c=i<=0&&l<=0?n(MapTreeLeaf$2__get_Key(u),MapTreeLeaf$2__get_Value(u),f):f;if(l<0){o=n,a=MapTreeNode$2__get_Right(u),_=c;continue e}return c}return e.Compare(r,MapTreeLeaf$2__get_Key(u))<=0&&e.Compare(MapTreeLeaf$2__get_Key(u),t)<=0?n(MapTreeLeaf$2__get_Key(u),MapTreeLeaf$2__get_Value(u),M):M}return M}};return 1===e.Compare(r,t)?_:p(o,a,_)}export function MapTreeModule_foldSection(e,r,t,o,a,_){return MapTreeModule_foldSectionOpt(e,r,t,o,a,_)}export function MapTreeModule_toList(e){const r=(e,t)=>{e:for(;;){const o=t;if(null!=e){const a=e;if(a instanceof MapTreeNode$2){e=MapTreeNode$2__get_Left(a),t=cons([MapTreeLeaf$2__get_Key(a),MapTreeLeaf$2__get_Value(a)],r(MapTreeNode$2__get_Right(a),o));continue e}return cons([MapTreeLeaf$2__get_Key(a),MapTreeLeaf$2__get_Value(a)],o)}return o}};return r(e,empty_1())}export function MapTreeModule_copyToArray(e,r,t){let o=t;MapTreeModule_iter(((e,t)=>{r[o]=[e,t],o=o+1|0}),e)}export function MapTreeModule_toArray(e){const r=0|MapTreeModule_size(e),t=fill(new Array(r),0,r,[null,null]);return MapTreeModule_copyToArray(e,t,0),t}export function MapTreeModule_ofList(e,r){return fold_1(((r,t)=>MapTreeModule_add(e,t[0],t[1],r)),MapTreeModule_empty(),r)}export function MapTreeModule_mkFromEnumerator(e,r,t){for(;;){const o=e,a=r,_=t;if(!_["System.Collections.IEnumerator.MoveNext"]())return a;{const p=_["System.Collections.Generic.IEnumerator`1.get_Current"]();e=o,r=MapTreeModule_add(o,p[0],p[1],a),t=_}}}export function MapTreeModule_ofArray(e,r){let t=MapTreeModule_empty();for(let o=0;o<=r.length-1;o++){const a=r[o];t=MapTreeModule_add(e,a[0],a[1],t)}return t}export function MapTreeModule_ofSeq(e,r){if(isArrayLike(r))return MapTreeModule_ofArray(e,r);if(r instanceof FSharpList)return MapTreeModule_ofList(e,r);{const t=getEnumerator(r);try{return MapTreeModule_mkFromEnumerator(e,MapTreeModule_empty(),t)}finally{disposeSafe(t)}}}export class MapTreeModule_MapIterator$2 extends Record{constructor(e,r){super(),this.stack=e,this.started=r}}export function MapTreeModule_MapIterator$2$reflection(e,r){return record_type("Map.MapTreeModule.MapIterator`2",[e,r],MapTreeModule_MapIterator$2,(()=>[["stack",list_type(option_type(MapTreeLeaf$2$reflection(e,r)))],["started",bool_type]]))}export function MapTreeModule_collapseLHS(e){e:for(;;){const r=e;if(isEmpty_1(r))return empty_1();{const t=tail(r),o=head(r);if(null!=o){const a=o;if(a instanceof MapTreeNode$2){e=ofArrayWithTail([MapTreeNode$2__get_Left(a),MapTreeLeaf$2_$ctor_5BDDA1(MapTreeLeaf$2__get_Key(a),MapTreeLeaf$2__get_Value(a)),MapTreeNode$2__get_Right(a)],t);continue e}return r}e=t;continue e}}}export function MapTreeModule_mkIterator(e){return new MapTreeModule_MapIterator$2(MapTreeModule_collapseLHS(singleton(e)),!1)}export function MapTreeModule_notStarted(){throw new Error("enumeration not started")}export function MapTreeModule_alreadyFinished(){throw new Error("enumeration already finished")}export function MapTreeModule_current(e){if(e.started){const r=e.stack;if(isEmpty_1(r))return MapTreeModule_alreadyFinished();if(null!=head(r)){const e=head(r);if(e instanceof MapTreeNode$2)throw new Error("Please report error: Map iterator, unexpected stack for current");return[MapTreeLeaf$2__get_Key(e),MapTreeLeaf$2__get_Value(e)]}throw new Error("Please report error: Map iterator, unexpected stack for current")}return MapTreeModule_notStarted()}export function MapTreeModule_moveNext(e){if(e.started){const r=e.stack;if(isEmpty_1(r))return!1;if(null!=head(r)){if(head(r)instanceof MapTreeNode$2)throw new Error("Please report error: Map iterator, unexpected stack for moveNext");return e.stack=MapTreeModule_collapseLHS(tail(r)),!isEmpty_1(e.stack)}throw new Error("Please report error: Map iterator, unexpected stack for moveNext")}return e.started=!0,!isEmpty_1(e.stack)}export function MapTreeModule_mkIEnumerator(e){let r=MapTreeModule_mkIterator(e);return{"System.Collections.Generic.IEnumerator`1.get_Current":()=>MapTreeModule_current(r),"System.Collections.IEnumerator.get_Current":()=>MapTreeModule_current(r),"System.Collections.IEnumerator.MoveNext":()=>MapTreeModule_moveNext(r),"System.Collections.IEnumerator.Reset"(){r=MapTreeModule_mkIterator(e)},Dispose(){}}}export function MapTreeModule_toSeq(e){return unfold((e=>e["System.Collections.IEnumerator.MoveNext"]()?[e["System.Collections.Generic.IEnumerator`1.get_Current"](),e]:void 0),MapTreeModule_mkIEnumerator(e))}export class FSharpMap{constructor(e,r){this.comparer=e,this.tree=r}GetHashCode(){return 0|FSharpMap__ComputeHashCode(this)}Equals(e){if(!(e instanceof FSharpMap))return!1;{const r=getEnumerator(this);try{const t=getEnumerator(e);try{const e=()=>{const o=r["System.Collections.IEnumerator.MoveNext"]();if(o===t["System.Collections.IEnumerator.MoveNext"]()){if(o){const o=r["System.Collections.Generic.IEnumerator`1.get_Current"](),a=t["System.Collections.Generic.IEnumerator`1.get_Current"]();return!(!equals(o[0],a[0])||!equals(o[1],a[1]))&&e()}return!0}return!1};return e()}finally{disposeSafe(t)}}finally{disposeSafe(r)}}}toString(){return"map ["+join("; ",map_1((e=>format("({0}, {1})",e[0],e[1])),this))+"]"}get[Symbol.toStringTag](){return"FSharpMap"}toJSON(){return Array.from(this)}GetEnumerator(){return MapTreeModule_mkIEnumerator(this.tree)}[Symbol.iterator](){return toIterator(this.GetEnumerator())}"System.Collections.IEnumerable.GetEnumerator"(){return MapTreeModule_mkIEnumerator(this.tree)}CompareTo(e){const r=this;if(e instanceof FSharpMap)return 0|compareWith(((e,t)=>{const o=0|r.comparer.Compare(e[0],t[0]);return 0|(0!==o?o:compare(e[1],t[1]))}),r,e);throw new Error("not comparable\\nParameter name: obj")}"System.Collections.Generic.ICollection`1.Add2B595"(e){throw new Error("Map cannot be mutated")}"System.Collections.Generic.ICollection`1.Clear"(){throw new Error("Map cannot be mutated")}"System.Collections.Generic.ICollection`1.Remove2B595"(e){throw new Error("Map cannot be mutated")}"System.Collections.Generic.ICollection`1.Contains2B595"(e){return FSharpMap__ContainsKey(this,e[0])&&equals(FSharpMap__get_Item(this,e[0]),e[1])}"System.Collections.Generic.ICollection`1.CopyToZ3B4C077E"(e,r){MapTreeModule_copyToArray(this.tree,e,r)}"System.Collections.Generic.ICollection`1.get_IsReadOnly"(){return!0}"System.Collections.Generic.ICollection`1.get_Count"(){return 0|FSharpMap__get_Count(this)}"System.Collections.Generic.IReadOnlyCollection`1.get_Count"(){return 0|FSharpMap__get_Count(this)}get size(){return 0|FSharpMap__get_Count(this)}clear(){throw new Error("Map cannot be mutated")}delete(e){throw new Error("Map cannot be mutated")}entries(){return map_1((e=>[e[0],e[1]]),this)}get(e){return FSharpMap__get_Item(this,e)}has(e){return FSharpMap__ContainsKey(this,e)}keys(){return map_1((e=>e[0]),this)}set(e,r){throw new Error("Map cannot be mutated")}values(){return map_1((e=>e[1]),this)}forEach(e,r){const t=this;iterate_1((r=>{partialApply(2,e,[r[1]])(r[0])(t)}),t)}}export function FSharpMap$reflection(e,r){return class_type("Map.FSharpMap",[e,r],FSharpMap)}export function FSharpMap_$ctor(e,r){return new FSharpMap(e,r)}export function FSharpMap_Empty(e){return FSharpMap_$ctor(e,MapTreeModule_empty())}export function FSharpMap__get_Comparer(e){return e.comparer}export function FSharpMap__get_Tree(e){return e.tree}export function FSharpMap__Add(e,r,t){return FSharpMap_$ctor(e.comparer,MapTreeModule_add(e.comparer,r,t,e.tree))}export function FSharpMap__Change(e,r,t){return FSharpMap_$ctor(e.comparer,MapTreeModule_change(e.comparer,r,t,e.tree))}export function FSharpMap__get_IsEmpty(e){return null==e.tree}export function FSharpMap__get_Item(e,r){return MapTreeModule_find(e.comparer,r,e.tree)}export function FSharpMap__TryPick(e,r){return MapTreeModule_tryPick(r,e.tree)}export function FSharpMap__Exists(e,r){return MapTreeModule_exists(r,e.tree)}export function FSharpMap__Filter(e,r){return FSharpMap_$ctor(e.comparer,MapTreeModule_filter(e.comparer,r,e.tree))}export function FSharpMap__ForAll(e,r){return MapTreeModule_forall(r,e.tree)}export function FSharpMap__Fold(e,r,t){return MapTreeModule_foldBack(r,e.tree,t)}export function FSharpMap__FoldSection(e,r,t,o,a){return MapTreeModule_foldSection(e.comparer,r,t,o,e.tree,a)}export function FSharpMap__Iterate(e,r){MapTreeModule_iter(r,e.tree)}export function FSharpMap__MapRange(e,r){return FSharpMap_$ctor(e.comparer,MapTreeModule_map(r,e.tree))}export function FSharpMap__Map(e,r){return FSharpMap_$ctor(e.comparer,MapTreeModule_mapi(r,e.tree))}export function FSharpMap__Partition(e,r){const t=MapTreeModule_partition(e.comparer,r,e.tree);return[FSharpMap_$ctor(e.comparer,t[0]),FSharpMap_$ctor(e.comparer,t[1])]}export function FSharpMap__get_Count(e){return MapTreeModule_size(e.tree)}export function FSharpMap__ContainsKey(e,r){return MapTreeModule_mem(e.comparer,r,e.tree)}export function FSharpMap__Remove(e,r){return FSharpMap_$ctor(e.comparer,MapTreeModule_remove(e.comparer,r,e.tree))}export function FSharpMap__TryGetValue(e,r,t){const o=MapTreeModule_tryFind(e.comparer,r,e.tree);if(null==o)return!1;{const e=value_1(o);return t.contents=e,!0}}export function FSharpMap__get_Keys(e){return map_2((e=>e[0]),MapTreeModule_toArray(e.tree),null)}export function FSharpMap__get_Values(e){return map_2((e=>e[1]),MapTreeModule_toArray(e.tree),null)}export function FSharpMap__TryFind(e,r){return MapTreeModule_tryFind(e.comparer,r,e.tree)}export function FSharpMap__ToList(e){return MapTreeModule_toList(e.tree)}export function FSharpMap__ToArray(e){return MapTreeModule_toArray(e.tree)}export function FSharpMap__ComputeHashCode(e){const r=(e,r)=>(e<<1)+r+631;let t=0;const o=getEnumerator(e);try{for(;o["System.Collections.IEnumerator.MoveNext"]();){const e=o["System.Collections.Generic.IEnumerator`1.get_Current"]();t=0|r(t,structuralHash(e[0])),t=0|r(t,structuralHash(e[1]))}}finally{disposeSafe(o)}return 0|t}export function isEmpty(e){return FSharpMap__get_IsEmpty(e)}export function add(e,r,t){return FSharpMap__Add(t,e,r)}export function change(e,r,t){return FSharpMap__Change(t,e,r)}export function find(e,r){return FSharpMap__get_Item(r,e)}export function tryFind(e,r){return FSharpMap__TryFind(r,e)}export function remove(e,r){return FSharpMap__Remove(r,e)}export function containsKey(e,r){return FSharpMap__ContainsKey(r,e)}export function iterate(e,r){FSharpMap__Iterate(r,e)}export function tryPick(e,r){return FSharpMap__TryPick(r,e)}export function pick(e,r){const t=tryPick(e,r);if(null!=t)return value_1(t);throw new Error}export function exists(e,r){return FSharpMap__Exists(r,e)}export function filter(e,r){return FSharpMap__Filter(r,e)}export function partition(e,r){return FSharpMap__Partition(r,e)}export function forAll(e,r){return FSharpMap__ForAll(r,e)}export function map(e,r){return FSharpMap__Map(r,e)}export function fold(e,r,t){return MapTreeModule_fold(e,r,FSharpMap__get_Tree(t))}export function foldBack(e,r,t){return MapTreeModule_foldBack(e,FSharpMap__get_Tree(r),t)}export function toSeq(e){return map_1((e=>[e[0],e[1]]),e)}export function findKey(e,r){return pick_1((r=>{const t=r[0];return e(t,r[1])?some(t):void 0}),r)}export function tryFindKey(e,r){return tryPick_1((r=>{const t=r[0];return e(t,r[1])?some(t):void 0}),r)}export function ofList(e,r){return FSharpMap_$ctor(r,MapTreeModule_ofSeq(r,e))}export function ofSeq(e,r){return FSharpMap_$ctor(r,MapTreeModule_ofSeq(r,e))}export function ofArray(e,r){return FSharpMap_$ctor(r,MapTreeModule_ofSeq(r,e))}export function toList(e){return FSharpMap__ToList(e)}export function toArray(e){return FSharpMap__ToArray(e)}export function keys(e){return FSharpMap__get_Keys(e)}export function values(e){return FSharpMap__get_Values(e)}export function empty(e){return FSharpMap_Empty(e)}export function count(e){return FSharpMap__get_Count(e)}