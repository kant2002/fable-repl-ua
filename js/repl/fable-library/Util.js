export function isArrayLike(e){return Array.isArray(e)||ArrayBuffer.isView(e)}export function isIterable(e){return null!=e&&"object"==typeof e&&Symbol.iterator in e}export function isEnumerable(e){return null!=e&&"function"==typeof e.GetEnumerator}export function isComparer(e){return null!=e&&"function"==typeof e.Compare}export function isComparable(e){return null!=e&&"function"==typeof e.CompareTo}export function isEquatable(e){return null!=e&&"function"==typeof e.Equals}export function isHashable(e){return null!=e&&"function"==typeof e.GetHashCode}export function isDisposable(e){return null!=e&&"function"==typeof e.Dispose}export function disposeSafe(e){isDisposable(e)&&e.Dispose()}export function defaultOf(){return null}export function sameConstructor(e,t){var r,n;return(null===(r=Object.getPrototypeOf(e))||void 0===r?void 0:r.constructor)===(null===(n=Object.getPrototypeOf(t))||void 0===n?void 0:n.constructor)}export class Enumerable{constructor(e){this.en=e}GetEnumerator(){return this.en}[Symbol.iterator](){return this}next(){const e=this.en["System.Collections.IEnumerator.MoveNext"]();return{done:!e,value:e?this.en["System.Collections.Generic.IEnumerator`1.get_Current"]():void 0}}}export class Enumerator{constructor(e){this.iter=e,this.current=defaultOf()}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current}"System.Collections.IEnumerator.get_Current"(){return this.current}"System.Collections.IEnumerator.MoveNext"(){const e=this.iter.next();return this.current=e.value,!e.done}"System.Collections.IEnumerator.Reset"(){throw new Error("JS iterators cannot be reset")}Dispose(){}}export function toEnumerable(e){return isEnumerable(e)?e:new Enumerable(new Enumerator(e[Symbol.iterator]()))}export function getEnumerator(e){return isEnumerable(e)?e.GetEnumerator():new Enumerator(e[Symbol.iterator]())}export function toIterator(e){return{[Symbol.iterator](){return this},next(){const t=e["System.Collections.IEnumerator.MoveNext"]();return{done:!t,value:t?e["System.Collections.Generic.IEnumerator`1.get_Current"]():void 0}}}}export function enumerableToIterator(e){return toIterator(toEnumerable(e).GetEnumerator())}export class Comparer{constructor(e){this.Compare=e||compare}}export function comparerFromEqualityComparer(e){return isComparer(e)?new Comparer(e.Compare):new Comparer(((t,r)=>{const n=e.GetHashCode(t),o=e.GetHashCode(r);return n===o?e.Equals(t,r)?0:-1:n<o?-1:1}))}export function assertEqual(e,t,r){if(!equals(e,t))throw Object.assign(new Error(r||`Expected: ${t} - Actual: ${e}`),{actual:e,expected:t})}export function assertNotEqual(e,t,r){if(equals(e,t))throw Object.assign(new Error(r||`Expected: ${t} - Actual: ${e}`),{actual:e,expected:t})}export class Lazy{constructor(e){this.factory=e,this.isValueCreated=!1}get Value(){return this.isValueCreated||(this.createdValue=this.factory(),this.isValueCreated=!0),this.createdValue}get IsValueCreated(){return this.isValueCreated}}export function lazyFromValue(e){return new Lazy((()=>e))}export function padWithZeros(e,t){let r=e.toString(10);for(;r.length<t;)r="0"+r;return r}export function padLeftAndRightWithZeros(e,t,r){let n=e.toString(10);for(;n.length<t;)n="0"+n;for(;n.length<r;)n+="0";return n}export function dateOffset(e){const t=e;return"number"==typeof t.offset?t.offset:1===e.kind?0:-6e4*e.getTimezoneOffset()}export function int16ToString(e,t){return(e=e<0&&null!=t&&10!==t?65535+e+1:e).toString(t)}export function int32ToString(e,t){return(e=e<0&&null!=t&&10!==t?4294967295+e+1:e).toString(t)}export class ObjectRef{static id(e){return ObjectRef.idMap.has(e)||ObjectRef.idMap.set(e,++ObjectRef.count),ObjectRef.idMap.get(e)}}ObjectRef.idMap=new WeakMap,ObjectRef.count=0;export function stringHash(e){let t=0,r=5381;const n=e.length;for(;t<n;)r=33*r^e.charCodeAt(t++);return r}export function numberHash(e){return 2654435761*e|0}export function combineHashCodes(e){return 0===e.length?0:e.reduce(((e,t)=>(e<<5)+e^t))}export function physicalHash(e){if(null==e)return 0;switch(typeof e){case"boolean":return e?1:0;case"number":return numberHash(e);case"string":return stringHash(e);default:return numberHash(ObjectRef.id(e))}}export function identityHash(e){return isHashable(e)?e.GetHashCode():physicalHash(e)}export function dateHash(e){return e.getTime()}export function arrayHash(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n++)r[n]=structuralHash(e[n]);return combineHashCodes(r)}export function structuralHash(e){var t;if(null==e)return 0;switch(typeof e){case"boolean":return e?1:0;case"number":return numberHash(e);case"string":return stringHash(e);default:return isHashable(e)?e.GetHashCode():isArrayLike(e)?arrayHash(e):e instanceof Date?dateHash(e):(null===(t=Object.getPrototypeOf(e))||void 0===t?void 0:t.constructor)===Object?combineHashCodes(Object.values(e).map((e=>structuralHash(e)))):numberHash(ObjectRef.id(e))}}export function fastStructuralHash(e){return stringHash(String(e))}export function safeHash(e){return identityHash(e)}export function equalArraysWith(e,t,r){if(null==e)return null==t;if(null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}export function equalArrays(e,t){return equalArraysWith(e,t,equals)}function equalObjects(e,t){const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;r.sort(),n.sort();for(let o=0;o<r.length;o++)if(r[o]!==n[o]||!equals(e[r[o]],t[n[o]]))return!1;return!0}export function equals(e,t){var r;return e===t||(null==e?null==t:null!=t&&(isEquatable(e)?e.Equals(t):isArrayLike(e)?isArrayLike(t)&&equalArrays(e,t):"object"==typeof e&&(e instanceof Date?t instanceof Date&&0===compareDates(e,t):(null===(r=Object.getPrototypeOf(e))||void 0===r?void 0:r.constructor)===Object&&equalObjects(e,t))))}export function compareDates(e,t){let r,n;return"offset"in e&&"offset"in t?(r=e.getTime(),n=t.getTime()):(r=e.getTime()+dateOffset(e),n=t.getTime()+dateOffset(t)),r===n?0:r<n?-1:1}export function comparePrimitives(e,t){return e===t?0:e<t?-1:1}export function compareArraysWith(e,t,r){if(null==e)return null==t?0:1;if(null==t)return-1;if(e.length!==t.length)return e.length<t.length?-1:1;for(let n=0,o=0;n<e.length;n++)if(o=r(e[n],t[n]),0!==o)return o;return 0}export function compareArrays(e,t){return compareArraysWith(e,t,compare)}function compareObjects(e,t){const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return r.length<n.length?-1:1;r.sort(),n.sort();for(let o=0,u=0;o<r.length;o++){const a=r[o];if(a!==n[o])return a<n[o]?-1:1;if(u=compare(e[a],t[a]),0!==u)return u}return 0}export function compare(e,t){var r;return e===t?0:null==e?null==t?0:-1:null==t?1:isComparable(e)?e.CompareTo(t):isArrayLike(e)?isArrayLike(t)?compareArrays(e,t):-1:"object"!=typeof e?e<t?-1:1:e instanceof Date?t instanceof Date?compareDates(e,t):-1:(null===(r=Object.getPrototypeOf(e))||void 0===r?void 0:r.constructor)===Object?compareObjects(e,t):-1}export function min(e,t,r){return e(t,r)<0?t:r}export function max(e,t,r){return e(t,r)>0?t:r}export function clamp(e,t,r,n){return e(t,r)<0?r:e(t,n)>0?n:t}export function createAtom(e){let t=e;return(...e)=>{if(0===e.length)return t;t=e[0]}}export function createObj(e){const t={};for(const r of e)t[r[0]]=r[1];return t}export function jsOptions(e){const t={};return e(t),t}export function round(e,t=0){const r=Math.pow(10,t),n=+(t?e*r:e).toFixed(8),o=Math.floor(n),u=n-o,a=u>.5-1e-8&&u<.5+1e-8?o%2==0?o:o+1:Math.round(n);return t?a/r:a}export function sign(e){return e>0?1:e<0?-1:0}export function unescapeDataString(e){return decodeURIComponent(e.replace(/\+/g,"%20"))}export function escapeDataString(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}export function escapeUriString(e){return encodeURI(e)}export function count(e){if(isArrayLike(e))return e.length;{let t=0;for(const r of e)t++;return t}}export function clear(e){isArrayLike(e)?e.splice(0):e.clear()}const CURRIED=Symbol("curried");export function uncurry(e,t){if(null==t||t.length>1)return t;const r=(...r)=>{let n=t;for(let t=0;t<e;t++)n=n(r[t]);return n};return r[CURRIED]=t,r}function _curry(e,t,r){return n=>1===t?r(...e.concat([n])):_curry(e.concat([n]),t-1,r)}export function curry(e,t){return null==t||1===t.length?t:CURRIED in t?t[CURRIED]:_curry([],e,t)}export function checkArity(e,t){return t.length>e?(...e)=>(...r)=>t.apply(void 0,e.concat(r)):t}export function partialApply(e,t,r){if(null!=t){if(CURRIED in t){t=t[CURRIED];for(let e=0;e<r.length;e++)t=t(r[e]);return t}return _curry(r,e,t)}}export function mapCurriedArgs(e,t){function r(e,t,n,o){const u=n[o];if(0!==u){const e=u[0],r=u[1];e>1&&(t=curry(e,t)),r>1&&(t=uncurry(r,t))}const a=e(t);return o+1===n.length?a:e=>r(a,e,n,o+1)}return n=>r(e,n,t,0)}export function copyToArray(e,t,r,n,o){if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(r))r.set(e.subarray(t,t+o),n);else for(let u=0;u<o;++u)r[n+u]=e[t+u]}